<% title t('titles.enter_2fa_code') %>

<h1 class="h3 margin-y-0">
  <%= t('two_factor_authentication.header_text') %>
</h1>

<p>
  <%= @presenter.phone_number_message %>
</p>

<%= form_tag(:idv_otp_verification, method: :put, role: 'form', class: 'margin-top-4') do %>
  <div class="grid-row margin-bottom-5">
    <div class="grid-col-12 tablet:grid-col-6">
      <%= label_tag 'code', t('simple_form.required.html') + t('forms.two_factor.code'),
                    class: 'block bold' %>
      <%= text_field_tag :code, '',
                         value: @code,
                         required: true,
                         aria: { invalid: false, describedby: 'code-instructs' },
                         autofocus: true,
                         pattern: '[0-9]*',
                         class: 'col-12 field monospace mfa usa-input margin-bottom-5',
                         maxlength: TwoFactorAuthenticatable::DIRECT_OTP_LENGTH,
                         autocomplete: 'one-time-code',
                         type: 'tel' %>
      <%= submit_tag t('forms.buttons.submit.default'),
                     class: 'usa-button usa-button--big usa-button--full-width' %>
    </div>
  </div>
<% end %>

<%= button_to(t('links.two_factor_authentication.get_another_code'), idv_resend_otp_path,
              method: :post,
              class: 'usa-button usa-button--outline ico ico-refresh',
              form_class: 'inline-block') %>

<p class="margin-top-6">
  <%= @presenter.update_phone_link %>
</p>

<div class="margin-top-4 border-top">
  <div class="margin-top-1">
    <%= link_to t('links.cancel'), idv_cancel_path %>
  </div>
</div>
