<%#
Renders a numeric OTP code input field. In addition to the locals described below, all additional
local assigns will be applied directly to the text input as a hash of HTML attributes.

locals:
* name: Field name. Defaults to `:code`.
* transport: WebOTP transport method. Defaults to 'sms'.
* value: Field value. Defaults to `''`.
* class: CSS classes to add (optional)
%>
<%
name = local_assigns.delete(:name) { :code }
transport = local_assigns.delete(:transport) { 'sms' }
classes = ['field monospace usa-input one-time-code-input']
classes << local_assigns.delete(:class) if local_assigns[:class]
%>

<%= text_field_tag(
  name,
  nil,
  'aria-invalid': 'false',
  'data-transport': transport,
  pattern: '[0-9]*',
  maxlength: TwoFactorAuthenticatable::DIRECT_OTP_LENGTH,
  autocomplete: 'one-time-code',
  inputmode: 'numeric',
  type: 'text',
  **local_assigns,
  class: classes,
) %>

<%= javascript_packs_tag_once 'one-time-code-input' %>
