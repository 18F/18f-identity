<%#
yields: Step title (required).
locals:
* current: Whether the step is the current step. Defaults to `false`.
* complete: Whether the step is a completed step. Defaults to `false`.
* pending: Whether the step should be shown in a pending state.
%>
<%
title = yield.presence or raise "no block content given"
classes = ['step-indicator__step']
classes << 'step-indicator__step--current' if local_assigns[:current]
classes << 'step-indicator__step--complete' if local_assigns[:complete]
classes << 'step-indicator__step--pending' if local_assigns[:pending]
%>

<%= tag.li class: classes, aria: { current: local_assigns[:current] ? 'step' : nil } do %>
  <span class="step-indicator__step-title">
    <%= title %>
  </span>
  <% if local_assigns[:complete] %>
    <span class="usa-sr-only"><%= t('step_indicator.completed') %></span>
  <% end %>
  <% if !local_assigns[:complete] && !local_assigns[:pending] && !local_assigns[:current] %>
    <span class="usa-sr-only"><%= t('step_indicator.not_completed') %></span>
  <% end %>
  <% if local_assigns[:pending] %>
    <span class="step-indicator__step-subtitle">
      <%= t('step_indicator.pending') %>
    </span>
  <% end %>
<% end %>
